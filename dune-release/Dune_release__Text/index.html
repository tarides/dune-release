<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dune_release__Text (dune-release.Dune_release__Text)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">dune-release</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Dune_release__Text</span></h1></header><p>Text processing helpers.</p><h2>Marked-up text files</h2><p><b>Warning.</b> Some of the following functions are not serious and can
break on certain valid inputs in all sorts of fashion. To understand
breakage bear in mind that they operate line-wise.</p><div class="spec type" id="type-flavour"><a href="#type-flavour" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>flavour</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-flavour.Markdown" class="anchored"><td class="def constructor"><a href="#type-flavour.Markdown" class="anchor"></a><code><span class="keyword">| </span></code><code>`Markdown</code></td></tr><tr id="type-flavour.Asciidoc" class="anchored"><td class="def constructor"><a href="#type-flavour.Asciidoc" class="anchor"></a><code><span class="keyword">| </span></code><code>`Asciidoc</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The type for text document formats.</p></div></div><div class="spec val" id="val-flavour_of_fpath"><a href="#val-flavour_of_fpath" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flavour_of_fpath : Fpath.t <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-flavour">flavour</a> option</code></div><div class="doc"><p><code class="code">flavour_of_fpath p</code> determines a flavour according to the
extension of <code class="code">p</code> as follows:
</p><ul><li><code class="code">Some `Markdown</code> for <code class="code">.md</code></li><li><code class="code">Some `Asciidoc</code> for <code class="code">.asciidoc</code> or <code class="code">.adoc</code></li><li><code class="code">None</code> otherwise</li></ul></div></div><div class="spec val" id="val-head"><a href="#val-head" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>head : ?&#8288;flavour:<a href="index.html#type-flavour">flavour</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>string) option</code></div><div class="doc"><p><code class="code">head ~flavour text</code> extracts the <em>head</em> of the document <code class="code">text</code> of
flavour <code class="code">flavour</code> (defaults to <code class="code">`Markdown</code>).</p><p>The head is defined as follows:
</p><ul><li>Anything before the first header is discarded.</li><li>The first header is kept in the first component</li><li>Everything that follows until the next header of the same or greater
level is kept discarding trailing blank lines.</li></ul></div></div><div class="spec val" id="val-header_title"><a href="#val-header_title" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>header_title : ?&#8288;flavour:<a href="index.html#type-flavour">flavour</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code class="code">header_title ~flavour text</code> extract the title of a header <code class="code">text</code>
of flavour <code class="code">flavour</code> (defaults to <code class="code">`Markdown</code>).</p></div></div><h2>Toy change log parsing</h2><div class="spec val" id="val-change_log_last_entry"><a href="#val-change_log_last_entry" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>change_log_last_entry : ?&#8288;flavour:<a href="index.html#type-flavour">flavour</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>(string<span class="keyword"> * </span>string)) option</code></div><div class="doc"><p><code class="code">change_log_last_version ~flavour text</code> tries to parse the last
change log entry of <code class="code">text</code> (i.e. the <a href="index.html#val-head">head</a> of <code class="code">text</code>) into
<code class="code">Some (version, (header, text))</code>, where <code class="code">(header,text)</code> is the
result of <a href="index.html#val-head">head</a> and <code class="code">version</code> a version number extracted from
<code class="code">header</code> (see <code class="code">topkg-log(2)</code> for details).</p></div></div><div class="spec val" id="val-change_log_file_last_entry"><a href="#val-change_log_file_last_entry" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>change_log_file_last_entry : Fpath.t <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>(string<span class="keyword"> * </span>string), Bos_setup.R.msg) Bos_setup.result</code></div><div class="doc"><p><code class="code">change_log_file_last_entry file</code> tries to parse the last
change log entry of the file <code class="code">file</code> using <a href="index.html#val-flavour_of_fpath">flavour_of_fpath</a> and
and <a href="index.html#val-change_log_last_entry">change_log_last_entry</a>.</p></div></div><h2>Toy URI parsing</h2><div class="spec val" id="val-split_uri"><a href="#val-split_uri" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>split_uri : ?&#8288;rel:bool <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (string<span class="keyword"> * </span>string<span class="keyword"> * </span>string) option</code></div><div class="doc"><p><code class="code">split_uri uri</code> splits <code class="code">uri</code> into a triple <code class="code">(scheme, host, path)</code>. If
<code class="code">rel</code> is <code class="code">true</code> (defaults to <code class="code">false</code>), a leading <code class="code">&quot;/&quot;</code> in <code class="code">path</code> is
removed.</p></div></div><h2>Edit and page text</h2><div class="spec val" id="val-edit_file"><a href="#val-edit_file" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>edit_file : Fpath.t <span class="keyword">&#8209;&gt;</span> (int, Bos_setup.R.msg) Bos_setup.result</code></div><div class="doc"><p><code class="code">edit_file f</code> invokes the tool mentioned in the <code class="code">EDITOR</code>
environment variable with <code class="code">f</code> and returns the exit code of
the program.</p></div></div><div class="spec val" id="val-find_pager"><a href="#val-find_pager" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find_pager : don't:bool <span class="keyword">&#8209;&gt;</span> (Bos_setup.Cmd.t option, Bos_setup.R.msg) Bos_setup.result</code></div><div class="doc"><p><code class="code">find ~no_pager</code> is an optional pager command. If <code class="code">don't</code> is
<code class="code">true</code> returns <code class="code">None</code>. Otherwise first consults the <code class="code">PAGER</code> environment
variable, then tries <code class="code">less</code> or <code class="code">more</code> in that order. If the <code class="code">TERM</code>
environment variable is <code class="code">&quot;dumb&quot;</code> or undefined unconditionaly returns
<code class="code">None</code>.</p></div></div><div class="spec module" id="module-Pp"><a href="#module-Pp" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Pp/index.html">Pp</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Pretty printers.</p></div></div></body></html>